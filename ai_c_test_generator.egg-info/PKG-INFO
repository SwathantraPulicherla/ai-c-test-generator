Metadata-Version: 2.4
Name: ai-c-test-generator
Version: 1.0.0
Summary: AI-powered C unit test generator using Google Gemini
Home-page: https://github.com/your-org/ai-c-test-generator
Author: AI Test Generator Team
Author-email: AI Test Generator Team <testgen@example.com>
Maintainer-email: AI Test Generator Team <testgen@example.com>
License: MIT
Project-URL: Homepage, https://github.com/your-org/ai-c-test-generator
Project-URL: Documentation, https://github.com/your-org/ai-c-test-generator#readme
Project-URL: Repository, https://github.com/your-org/ai-c-test-generator.git
Project-URL: Issues, https://github.com/your-org/ai-c-test-generator/issues
Project-URL: Changelog, https://github.com/your-org/ai-c-test-generator/blob/main/CHANGELOG.md
Keywords: c,testing,unit-tests,ai,gemini,code-generation
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Software Development :: Testing
Classifier: Topic :: Software Development :: Code Generators
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: google-generativeai>=0.8.0
Requires-Dist: python-dotenv>=0.19.0
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# AI C Test Generator

AI-powered unit test generator for C code using Google Gemini AI. Automatically generates comprehensive Unity framework tests for your C functions with intelligent stub generation and validation.

## Features

- 🤖 **AI-Powered**: Uses Google Gemini 2.5 Flash for intelligent test generation
- 🔍 **Smart Analysis**: Automatically analyzes C code dependencies and function relationships
- 🧪 **Unity Framework**: Generates tests compatible with the Unity testing framework
- ✅ **Validation**: Comprehensive test validation and quality assessment
- 📊 **Reports**: Detailed validation reports with compilation status and quality metrics
- 🛠️ **CLI Tool**: Easy-to-use command-line interface
- 📦 **Pip Installable**: Install via pip for global usage

## Installation

### From PyPI (Recommended)
```bash
pip install ai-c-test-generator
```

### From Source
```bash
git clone https://github.com/your-org/ai-c-test-generator.git
cd ai-c-test-generator
pip install -e .
```

## Requirements

- Python 3.8+
- Google Gemini API key
- Unity testing framework (automatically included in generated tests)

## Quick Start

1. **Get a Gemini API Key**
   - Visit [Google AI Studio](https://makersuite.google.com/app/apikey)
   - Create a new API key

2. **Set Environment Variable**
   ```bash
   export GEMINI_API_KEY=your_api_key_here
   ```

3. **Generate Tests**
   ```bash
   # Navigate to your C project
   cd your-c-project

   # Generate tests for all C files in src/
   ai-c-testgen

   # Or specify custom paths
   ai-c-testgen --repo-path /path/to/project --source-dir src --output tests
   ```

## Usage

### Basic Usage
```bash
ai-c-testgen [OPTIONS]
```

### Command Line Options

- `--repo-path PATH`: Path to the C repository (default: current directory)
- `--output DIR`: Output directory for generated tests (default: tests)
- `--api-key KEY`: Google Gemini API key (can also use GEMINI_API_KEY env var)
- `--source-dir DIR`: Source directory containing C files (default: src)
- `--verbose, -v`: Enable verbose output
- `--version`: Show version information

### Examples

**Generate tests for current directory:**
```bash
ai-c-testgen
```

**Generate tests with custom paths:**
```bash
ai-c-testgen --repo-path /home/user/my-c-project --source-dir source --output test_output
```

**Use API key directly:**
```bash
ai-c-testgen --api-key YOUR_API_KEY_HERE
```

**Verbose output:**
```bash
ai-c-testgen --verbose
```

## Project Structure

Your C project should follow this structure:
```
your-project/
├── src/                    # Your C source files
│   ├── main.c
│   ├── utils.c
│   └── sensors.c
├── tests/                  # Generated tests (created automatically)
│   ├── test_main.c
│   ├── test_utils.c
│   └── compilation_report/  # Validation reports
└── unity/                  # Unity framework (if not present)
```

## How It Works

1. **Code Analysis**: Scans your `src/` directory for C files
2. **Dependency Mapping**: Builds a map of function relationships across files
3. **AI Generation**: Uses Gemini AI to generate comprehensive unit tests
4. **Stub Creation**: Automatically creates stub functions for dependencies
5. **Validation**: Compiles and validates generated tests
6. **Reporting**: Saves detailed validation reports

## Generated Test Features

- **Comprehensive Coverage**: Tests normal cases, edge cases, and error conditions
- **Proper Stubs**: Automatically generated stub functions with configurable return values
- **Unity Framework**: Compatible with Unity testing framework
- **Isolation**: Each test is properly isolated with setUp/tearDown functions
- **Validation**: Tests are validated for compilation and realism

## Validation Reports

Each generated test includes a validation report with:
- ✅ **Compilation Status**: Whether the test compiles successfully
- 🎯 **Quality Rating**: High/Medium/Low quality assessment
- 📊 **Realism Check**: Validates test values are within realistic ranges
- 🔧 **Issues List**: Detailed list of any problems found
- 💡 **Improvement Suggestions**: Recommendations for fixing issues

## Unity Framework Integration

The tool generates tests that work with the Unity testing framework. If Unity is not present in your project, the generated tests include the necessary framework code.

Key Unity features used:
- `TEST_ASSERT_*` macros for various assertion types
- `setUp()` and `tearDown()` functions for test isolation
- Proper test function naming (`test_*`)
- Floating-point assertions with tolerance

## API Key Setup

### Environment Variable (Recommended)
```bash
export GEMINI_API_KEY=your_api_key_here
```

### Direct Parameter
```bash
ai-c-testgen --api-key your_api_key_here
```

### .env File
Create a `.env` file in your project root:
```
GEMINI_API_KEY=your_api_key_here
```

## Troubleshooting

### Common Issues

**"No C files found"**
- Ensure your C files are in a `src/` directory
- Check that files have `.c` extension
- Use `--source-dir` to specify a different directory

**"API key not found"**
- Set the `GEMINI_API_KEY` environment variable
- Or use the `--api-key` parameter
- Check that your API key is valid

**"Compilation errors"**
- Check the validation reports in `tests/compilation_report/`
- Common issues: missing includes, incorrect function signatures
- The tool attempts to fix common issues automatically

**"Permission denied"**
- Ensure write permissions in the output directory
- Check that the repository path is accessible

### Getting Help

- Check validation reports for detailed error information
- Use `--verbose` flag for detailed output
- Ensure your C code follows standard conventions

## Development

### Setting up for Development
```bash
git clone https://github.com/your-org/ai-c-test-generator.git
cd ai-c-test-generator
pip install -e ".[dev]"
```

### Running Tests
```bash
pytest
```

### Building Distribution
```bash
python -m build
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## License

MIT License - see LICENSE file for details.

## Changelog

### v1.0.0
- Initial release
- AI-powered test generation using Google Gemini
- Unity framework integration
- Comprehensive validation and reporting
- CLI tool with pip installation
